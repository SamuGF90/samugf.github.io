<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publications | Gergely Samu</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

  <!-- Navbar -->
  <header class="bg-white shadow sticky top-0 z-10">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-xl font-bold">Gergely Samu</h1>
      <nav class="space-x-4">
        <a href="index.html" class="hover:text-blue-600">Home</a>
        <a href="publications.html" class="text-blue-600 font-semibold">Publications</a>
        <a href="contact.html" class="hover:text-blue-600">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Publications -->
  <section class="py-20">
    <div class="max-w-4xl mx-auto px-4">
      <h3 class="text-3xl font-bold mb-6">Publications</h3>

     <!-- Scientometric Summary Section -->
<div class="bg-white p-4 rounded shadow mb-6">
  <h2 class="text-lg font-semibold mb-4">Scientometric Summary</h2>

  <div class="flex flex-col md:flex-row items-start gap-6">

    <!-- Left: Stats + Badges -->
    <div class="md:w-1/2 w-full text-left text-[1rem] text-gray-800 flex flex-col justify-start mt-12 pl-20">

      <!-- Stats -->
      <div class="mb-4">
        <p class="mb-2"><span class="font-semibold">Total Citations:</span> 1898</p>
        <p class="mb-2"><span class="font-semibold">Citations since 2019:</span> 1554</p>
        <p class="mb-2"><span class="font-semibold">h-index:</span> 24</p>
        <p><span class="font-semibold">i10-index:</span> 42</p>
        <p class="mt-2 text-xs text-gray-500 italic">Last updated: August 2025</p>
      </div>

      <!-- Badges -->
      <div class="flex flex-wrap gap-4">
        <a href="https://orcid.org/0000-0002-3239-9154" target="_blank" title="ORCID">
          <img src="images/icons/ORCID.png" alt="ORCID" 
          class="h-10 w-10 transition-transform transform hover:scale-110 hover:shadow-md hover:bg-gray-100 p-1 rounded">
        </a>
        <a href="https://scholar.google.com/citations?user=aIPTi40AAAAJ&hl=hu" target="_blank" title="Google Scholar">
          <img src="images/icons/scholar.png" alt="Google Scholar" 
          class="h-10 w-10 transition-transform transform hover:scale-110 hover:shadow-md hover:bg-gray-100 p-1 rounded">
        </a>
        <a href="https://m2.mtmt.hu/gui2/?type=authors&mode=browse&sel=10040508&view=dataSheet" target="_blank" title="MTMT">
          <img src="images/icons/mtmt.png" alt="MTMT" 
          class="h-10 w-10 transition-transform transform hover:scale-110 hover:shadow-md hover:bg-gray-100 p-1 rounded">
        </a>
        <a href="https://www.researchgate.net/profile/Gergely-Samu?ev=hdr_xprf" target="_blank" title="ResearchGate">
          <img src="images/icons/ResearchGate.png" alt="ResearchGate" 
          class="h-10 w-10 transition-transform transform hover:scale-110 hover:shadow-md hover:bg-gray-100 p-1 rounded">
        </a>
        <a href="https://www.scopus.com/authid/detail.uri?authorId=55940039800" target="_blank" title="Scopus">
          <img src="images/icons/Scopus.png" alt="Scopus" 
          class="h-10 w-10 transition-transform transform hover:scale-110 hover:shadow-md hover:bg-gray-100 p-1 rounded">
        </a>
      </div>
    </div>

    <!-- Divider -->
    <div class="hidden md:block w-px bg-gray-300 h-auto self-stretch"></div>

    <!-- Right: Citation Graph -->
    <div class="md:w-1/2 w-full">
      <img src="images/citations.png" alt="Citation graph" class="rounded max-w-full mx-auto">
    </div>
  </div>
</div>

      <!-- Year Filter -->
      <div class="mb-4">
        <label for="yearSelect" class="block mb-2 text-gray-700 font-medium">Filter by Year:</label>
        <select id="yearSelect" class="p-2 border border-gray-300 rounded-md">
          <option value="all">All Years</option>
        </select>
      </div>

      <!-- List -->
      <ul id="pubList" class="space-y-4 text-gray-700 text-lg">
        <li>Loading publications from ORCID...</li>
      </ul>
    </div>
  </section>

  <!-- Script to fetch publications -->
<script>
const pubList = document.getElementById("pubList");
const yearSelect = document.getElementById("yearSelect");

function formatAuthor(name) {
  const parts = name.split(",");
  if (parts.length === 2) {
    const last = parts[0].trim();
    const first = parts[1].trim();
    const full = `${first} ${last}`;
    return full === "G.F. Samu" ? `<strong>${full}</strong>` : full;
  }
  return name;
}

async function buildPublicationList() {
  const response = await fetch("orcid-details.json");
  const publications = await response.json();
 
  // Sort by year descending
  publications.sort((a, b) => b.year.localeCompare(a.year));
 
  // Populate year dropdown
  const years = [...new Set(publications.map(p => p.year))].sort((a, b) => b - a);
  years.forEach(y => {
    const option = document.createElement("option");
    option.value = y;
    option.textContent = y;
    yearSelect.appendChild(option);
  });

  function render(filterYear) {
    pubList.innerHTML = "";
    const filtered = filterYear === "all"
      ? publications
      : publications.filter(p => p.year === filterYear);

    if (filtered.length === 0) {
      pubList.innerHTML = `<li class="text-gray-500">No publications for selected year.</li>`;
      return;
    }

    filtered.forEach((p, index) => {
  const highlightedAuthors = p.authors.map(formatAuthor).join(", ");
  const tocImgHTML = p.toc ? `<img src="${p.toc}" alt="TOC Figure" class="mt-2 rounded shadow max-w-xs">` : "";
  const abstractHTML = p.abstract ? `<p class="mt-2">${p.abstract}</p>` : "";

  const li = document.createElement("li");
  li.className = "bg-white p-4 rounded shadow";

  li.innerHTML = `
    <div class="font-semibold text-gray-900 mb-1">[${publications.length - index}] ${p.title}</div>
    <div class="text-sm text-gray-600 mb-1">${highlightedAuthors}</div>
    <div class="text-sm text-gray-600">${p.journal} â€¢ ${p.year}
      ${p.doi ? ` <a href="${p.doi}" target="_blank" class="text-blue-600 hover:underline ml-2">(DOI)</a>` : ""}
    </div>

    ${(p.abstract || p.toc) ? `
      <button class="text-blue-600 mt-2 text-sm hover:underline toggle-btn">Show more</button>
      <div class="collapse-content mt-2 hidden text-sm text-gray-700">
  <div class="flex flex-col md:flex-row gap-4">
    ${p.abstract ? `<div class="md:w-2/3 text-justify">${p.abstract}</div>` : ""}
    ${p.toc ? `<div class="md:w-1/3"><img src="${p.toc}" alt="TOC Figure" class="rounded shadow max-w-full h-auto"></div>` : ""}
  </div>
</div>
    ` : ""}
  `;

  const btn = li.querySelector(".toggle-btn");
  const content = li.querySelector(".collapse-content");
  if (btn && content) {
    btn.addEventListener("click", () => {
      content.classList.toggle("hidden");
      btn.textContent = content.classList.contains("hidden") ? "Show more" : "Show less";
    });
  }

  pubList.appendChild(li);
});
  }

  render("all");
  yearSelect.addEventListener("change", e => render(e.target.value));
}

buildPublicationList();
</script>
</body>
</html>